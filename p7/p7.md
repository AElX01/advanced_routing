---
title: "PRACTICE REPORT, IPSEC CONFIGURATION GUIDE"
author: ["daniel.juarez@iteso.mx, enrique.rios@iteso.mx", "TEAM 5"]
date: "2024-11-24"
subject: "Markdown"
keywords: [Markdown, Example]
subtitle: "ADVANCED ROUTING"
lang: "en"
titlepage: true
titlepage-color: "FFFFFF"
titlepage-text-color: "000000"
titlepage-rule-color: "DC143C"
titlepage-rule-height: 2
book: true
classoption: oneside
code-block-font-size: \scriptsize
toc: true
---

# EXECUTIVE REPORT

## PROJECT OVERVIEW



### GOALS

- To configure a private and secure LANs interconnection via the *IPsec* protocol

# IPSEC CONFIGURATION GUIDE REPORT

## IPSEC CONFIGURATION GUIDE

### ASSUMPTIONS

- Internet routers have been configured with the **OSPF** protocol
- *R2* and *R4* only have a default route to their corresponding *Telco*

### NETWORK DIAGRAM

![](VPN.png)

### IKE PHASE 1 

After the listed assumptions above have been configured on the network diagram, the next step is to interconnect both LANs via an *IPsec* tunnel. The network administrator have to define first the security parameters that *IKE* will use when establishing the secure tunnel (ensure as well the following commands are configured on both peers). THe administrator must define the parameters for both phases (how secure the tunnel will be). The purpose of the *IKE phase 1* is to establish an authenticated and secure channel that *IPsec* data will use.  

- In any of the routers, enter the following command to create an *IKE phase 1* policy, the lower the number is, the higher the priority will be:

```bash
crypto isakmp policy 10
```

- After creating the *IKE* policy, the network administrator must tell the router it will use a *pre-shared* key for authentication on the phase 1 channel:

```bash 
authentication pre-share
```

- The next step is to set the encryption algorithm phase 1 packets will use, in this case, we defined the encryption algorithm as *aes* with 256-bit lenght:

```bash 
encryption aes 256
```

- To verify data integrity, the network administrator can define an algorithm as follows:

```bash 
hash sha
```

- Next it is required to define the Diffie-Hellman group for key exchange (higher group numbers are more secure but slower):

```bash 
group 2
```

- Define the security assosiation lifetime:

```bash 
lifetime 86400
```

- Lastly, define the pre-shared key that will be used with a certain peer during phase 1 authentication:

```bash 
crypto isakmp key TESTKEY address <peer ip>
```

The next step is to establish the IPsec tunnel, which secures data transfer between the two LANs. This phase requires the configuration of the encryption and authentication parameters for securing data packets.

- Define the encryption and authentication methods to protect the data. This step uses Encapsulated Secure Payload (ESP), which provides confidentiality, authentication, and data integrity:

```bash
crypto ipsec transform-set <TRANSFORM_SET_NAME> esp-aes 256 esp-sha-hmac
```

- Create a crypto map links the transform set, ACL, and peer IP to establish the IPsec tunnel. The following configuration defines these associations:

```bash
crypto map <NAME-MAP> 10 ipsec-isakmp 
set peer <IP-PEER>
set transform-set <TRANSFORM_SET_NAME> 
match address <ID>
```
The ACL identifies "interesting traffic," which specifies the IP ranges that should be encrypted between the two LANs. This ACL matches traffic between the local and remote subnets:

```bash
access-list <ID> permit ip <IP-NETWORK> <WILDCARD> <IP-NETWORK> <WILDCARD>
```

- Once the configuration is done, verify that the IPSec tunnel is running:

```bash
show crypto isakmp sa
show crypto ipsec sa
```




## TESTING CONFIGURATIONS

## CONCLUSIONS

## REFERENCES